\begin{titlepage}
\flushright
\vspace*{7cm}

{\garet\fontsize{48}{54}\bfseries
\text{Analysis (I)} %main title
}

\vspace{0.2cm}
% \Large{\cjkserif{}} %subtitle
   
\vspace{2 cm}
\Large{by Poshen Chang}%your name

\large{v.1}%YOUR NUMBER

\vspace{3.5 cm}
\Large{\today}%date

% \vspace{0.25 cm}
% \Large{\myfont }%place

\vfill
\end{titlepage}

\tableofcontents

\resetcounters
\justifying
% \thispagestyle{fancy}
\setlength{\parindent}{2em}

% \newtcolorbox{mybox}[2][]{}

% \tcbset{after title={\hfill\colorbox{black}{\mdseries\color{white} solved}}}

% 以下輸入正文
%\setcounter{chapter}{0}

\chapter{Topological Spaces}

In the language of calculus, we defined convergence, continuity and such concepts on the real numbers $\R$. We would like to generalize this concept.

\section{Metric Spaces}

\begin{df}
    A metric space is a nonempty set $M$, together with a metric $d : M\times M\to \R$. $d(x, y)$ is a real number defined for all $x, y\in M$, which can be thought of as the distance between $x$ and $y$. $d$ satisfies the following properties:
    \begin{enumerate}[label={\alph*)}]
        \item (Positive definiteness) $d(x, y) \geq 0$, and $d(x, y) = 0$ iff $x = y$.
        \item (Symmetry) $d(x, y) = d(y, x)$.
        \item (Triangle inequality) $d(x, z) \leq d(x, y) + d(y, z)$.
    \end{enumerate}
    We say that the pair $(M, d)$ is a metric space. The metric $d$ can be omitted if it is clear from the context.
\end{df}

\begin{ex}
    The following are some examples of metric spaces:
    \begin{itemize}
        \item $(\R, d)$, where $d(x, y) = |x - y|$.
        \item $(\R^n, d)$, where
        \[
        d(\mathbf x, \mathbf y) = \sqrt{(x_1 - y_1)^2 + \cdots + (x_n + y_n)^2}.
        \]
        \item $(M, d)$, where $M\neq\emptyset$, and
        \[
        d(x, y) = \begin{cases}
            0, \quad \text{if } x = y, \\
            1, \quad \text{if } x \neq y.
        \end{cases}
        \]
        This metric is called the \textbf{discrete metric} on $M$.
    \end{itemize}
\end{ex}

If $\emptyset \neq A \subseteq M$, and if $M$ is a metric, then $(A, d)$ is also a metric space. We call $A$ a metric subspace of $M$, or $A$ inherits its metric from $M$.

\begin{df}
    We say that a sequence $(x_n)$ in $M$ converges to the limit $x$ in $M$ if for any given $\epsilon > 0$, $\exists N \in \N$ such that $n\geq N$ and $n \in \N$ implies $d(x_n, x) < \epsilon$.
\end{df}

It's easy to check that limits are unique. Also, every subsequence of a convergent sequence converges, and it converges to the same limit as the original sequence.

\section{Continuity}

\begin{df}
    Let $(M, d_M)$ and $(N, d_N)$ be metric spaces. We say that $f: M\to N$ is continuous if it preserves sequential convergence, i.e. for each $(x_n)$ in $M$ which converges to $x$ in $M$, the image sequence $(f(x_n))$ converges to $f(x)$.
\end{df}

\begin{prop}
    Composition of continuous functions is continuous
    \begin{proof}
        Let $M, N, P$ be metric spaces, and let $f: M\to N$, $g: N\to P$ be continuous functions.
        
        Let $(x_n)$ be a convergent sequence in $M$ with limit $x$. We have
        \[
        \lim_{n\to\infty} x_n = x \xRightarrow{f\text{ conti.}} \lim_{n\to\infty} f(x_n) = f(x) \xRightarrow{g\text{ conti.}} \lim_{n\to\infty} g(f(x_n)) = g(f(x)),
        \]
        thus $g\circ f$ is continuous.
    \end{proof}
\end{prop}

\begin{ex}
    The following are some examples of continuous functions:
    \begin{itemize}
        \item The identity map $~id : M\to M$ is continuous.
        \item Every constant function $f: M\to N$ is continuous.
        \item Every function $f: M\to N$ is continuous if $M$ is equipped with the discrete metric.
    \end{itemize}
\end{ex}

\begin{df}
    If $f: M\to N$ is a bijection such that $f$ and $f^{-1}: N\to M$ are continuous, then we say that $f$ is a homeomorphism. If there exists a homeomorphism between $M$ and $N$, we say that $M, N$ are homeomorphic, denoted by $M\cong N$.
\end{df}

Intuitively, a homeomorphism is a bijection that can bend, twist, stretch the space $M$ to make it coincide with $N$, but it cannot rip, puncture or shred $M$ etc.

\begin{ex}
    Let $\mathbb S^1$ be the unit circle in the plane. Consider the interval $[0, 2\pi)$. Define $f: [0, 2\pi) \to \mathbb S^1$ to be the function $f(\theta) = (\cos\theta, \sin\theta)$. $f$ is continuous and bijective, but $f^{-1}$ is not continuous (consider a sequence in $\mathbb S^1$ approaching $(1, 0)$ from the lower plane).
\end{ex}

\begin{prop}
    $f: M\to N$ is continuous iff it satisfies the following: $\forall \epsilon$ and $x\in M$, $\exists \delta > 0$ such that if $y\in M$ and $d_M(x, y) < \delta$ then $d_N(f(x), f(y)) < \epsilon$.
    \begin{proof}
        "$\implies$": Suppose that $f$ fails to satisfy the $\epsilon$-$\delta$ condition at some $x\in M$. $\exists \epsilon > 0$ such that $\forall \delta > 0$, $\exists y\in M$ such that $d_M(x, y) < \delta$ but $d_N(f(x), f(y)) \geq \epsilon$. Take $\delta = \frac 1n$. By our assumption, we can obtain a sequence $(y_n)$ with $d_M(x, y_n) < \frac 1n$ but $d_N(f(x), f(y_n)) \geq \epsilon$, so $(y_n)$ converges to $x$ but $f(y_n)$ does not approach $f(x)$, contradicting the continuity of $f$.

        "$\impliedby$": Suppose that $f$ satisfies the $\epsilon$-$\delta$ condition at $x$. Let $(x_n)$ be a sequence in $M$ susch that $(x_n)$ converges to $x$. Let $\epsilon > 0$. $\exists \delta > 0$ such that $d_M(x, y) < \delta \implies d_N(f(x), f(y)) < \epsilon$. Since $(x_n)$ approaches $x$, $\exists K \in \N$ such that if $n\geq K$, then $d_M(x_n, x) < \delta$, hence $d_N(f(x_n), f(x)) < \epsilon$ for all $n\geq K$. That is, $(f(x_n))$ converges to $f(x)$.
    \end{proof}
\end{prop}

\section{The Topology of a Metric Space}

\begin{df}
    Let $M$ be a metric space, $S\subseteq M$.
    \begin{itemize}
        \item We say $S$ is open if for each $x\in S$, $\exists r > 0$ such that $d(x, y) < r$ implies $y\in S$.
        \item We say $S$ is closed if its complement is open.
        \item We say that a point $x\in M$ is a limit of $S$ if there exists a sequence in $S$ that converges to $x$.
    \end{itemize}
\end{df}

\begin{prop}
    A set $S\subseteq M$ is closed iff it contains all its limits.
    \begin{proof}
        "$\implies$": Suppose that $S$ is closed. Let $(x_n)$ be a sequence in $S$ such that $(x_n)$ converges to $x$, $x\in M$. Suppose $x\notin S$, then since $S^c$ is open, $\exists r>0$ such that $d(x, y) < r$ implies $y\in S^c$. Since $(x_n)$ converges to $x$, we have $d(x_n, x) < r$ for all $n$ large enough, implying that $x_n \in S^c$, contradiction. Therefore, for any limit point $x$ of $S$, $x\in S$.

        "$\impliedby$": Suppose that $S$ contains all its limits. If $S^c$ is not open, then $\exists x \in S^c$ such that $\forall n\in \N$, $\exists x_n\in (S^c)^c = S$ such that $d(x, x_n) < \frac1n$. We have now constructed q sequence $(x_n)$ in $S$, but converges to a point in $S^c$, contradiction. Thus $S^c$ is open, i.e. $S$ is closed.
    \end{proof}
\end{prop}

\begin{rmk}
    Sets can be neither open nor closed, or they can also be both open and closed.
\end{rmk}

\begin{df}
    The topology $\mathcal T$ of $M$ is the collection of all open subsets of $M$.
\end{df}

\begin{prop}
    $\mathcal T$ is closed under arbitrary union, finite intersection, and $\mathcal T$ contains $\emptyset$ and $M$.

    \begin{proof}
        Clearly, $\emptyset$ and $M$ are open.

        Let $(\mathcal U_\alpha)$ be a collection of open subsets of $M$. Define $V = \bigcup_\alpha \mathcal U_\alpha$. For any $x\in V$, $x\in \mathcal U_\alpha$ for some $\alpha$. Since $\mathcal U_\alpha$ is open, $\exists r>0$ such that $d(x, y)<r \implies y\in \mathcal U_\alpha \subseteq V$, so $V$ is open.

        Define $W = \bigcap_{i=1}^n \mathcal U_i$. Given $x\in W$, for each $1\leq i\leq n$, $\exists r_i > 0$ such that $d(x, y) < r_i \implies y\in \mathcal U_i$. Take $r = \min{r_1, \ldots, r_n}$, then for any $y$ satisfying $d(x, y) < r$, we have $y\in \mathcal U_i$ for all $1\leq i\leq n$, thus $y\in W$. Hence $W$ is open.
    \end{proof}
\end{prop}

\begin{df}
    Let $X$ be a set. A topology $\mathcal T$ of $X$ is a collection of subsets of $X$ that satisfies the following:
    \begin{enumerate}[label={\alph*)}]
        \item $\mathcal T$ is closed under arbitrary union,
        \item $\mathcal T$ is closed under finite intersection, and
        \item $\emptyset, X \in \mathcal T$.
    \end{enumerate}
    We say that  $(X, \mathcal T)$ is a topological space if $\mathcal T$ is a topology of $X$. The elements of $\mathcal T$ are called open sets. We define $S\subseteq X$ to be closed if $S^c$ is open.
\end{df}

\begin{ex}
    The following are some examples of topological spaces:
    \begin{itemize}
        \item A metric space is a topological space.
        \item Let $X$ be a set, and $\mathcal T = \{\emptyset, X\}$. Then $(X, \mathcal T)$ is a topological space, which is know as the trivial topology.
        \item Let $X$ be a set, and let $\mathcal T$ be the power set of $X$, then $(X, \mathcal T)$ is a topological space, which is known as the discrete topology.
    \end{itemize}
\end{ex}

\begin{rmk}
    By De Morgan's law, closed sets are closed under arbitrary intersection and finite union, also $\emptyset, X$ are closed.

    In general, infinite union of closed sets may not be closed.
\end{rmk}

\begin{df}
    Let $M$ be a metric space and $S\subseteq M$. Define
    \[
    \Bar S := \{x\in M \mid x\text{ is a limit of }S\}
    \]
    to be the closure of $S$.
    For $x\in M$, $r > 0$, define
    \[
    B(x, r) := \{y\in M\mid d(x, y) < r\},
    \]
    which is the ball centered at $x$ with radius $r$, or the $r$-neighborhood of $x$.
\end{df}

\begin{prop}
    $\Bar S$ is closed and $B(x, r)$ is open.

    \begin{proof}
        If $S = \emptyset$, then $\Bar S = \emptyset$, which is closed.

        Suppose that $S\neq \emptyset$, and let $(x_n) \to x$ be a convergence sequence in $\Bar S$. We wish to prove that $x\in \Bar S$, i.e. there exists a sequence in $S$ that approaches $x$. Since $x_n\in \Bar S$, there exists sequence $(x_{n, k})$ in $S$ that approaches $x_n$ as $k\to \infty$. For each $n$, there exists a term $x_{n, k_n}$ satisfying $d(x_{n, k_n}, x_n) < \frac1n$, picking these terms forms a new sequence $(x_{n, k_n})$, moreover, 
        \[
        d(x_{n, k_n}, x) \leq d(x_{n, k_n}, x_n) + d(x_n, x) < \frac1n + d(x_n, x),
        \]
        which approaches $0$ as $n\to\infty$, thus $(x_{n, k_n})$ approaches $x$.

        Fix $x\in M$ and $r > 0$. Let $y \in B(x, r)$ and pick $s = r - d(x, y)$. If $z$ satisfies $d(y, z) < s$, then
        \[
        d(x, z) \leq d(x, y) + d(y, z) < d(x, y) + s = r \implies B(y, s) \subseteq B(x, r),
        \]
        so $B(x, r)$ is open.
    \end{proof}
\end{prop}

\begin{cl}
    \label{cl:smallest-closed-set}
    $\Bar S$ is the smallest closed set that conatins $S$, i.e. if $K\supseteq S$ and $K$ is closed then $K\supseteq \Bar S$.

    \begin{proof}
        $K$ contains the limit of each sequence in $K$, in particular $S\subseteq K$ so it contains all sequence in $S$ that converges in $M$, but these are precisely $\Bar S$.
    \end{proof}
\end{cl}

With the observation from Corollary \ref{cl:smallest-closed-set}, we may define the closure for topological spaces in general.

\begin{df}
    Lex $X$ be a topological space, and let $S\subseteq X$. We define $\overline S$ to be the smallest closed set that contains $S$. $\Bar S$ always exists; take
    \[
    \Bar S = \bigcap\set{E\subseteq X \mid E \text{ is closed in }X\text{ and }E\supseteq S}.
    \]
    Likewise, we also define the interior of $S$, $~int (S)$, to be the largest open set contained in $S$
\end{df}

\begin{df}
    Let $X$ be a topological space, $x\in X$. A neighborhood of $x$ is an open set containing $x$.
\end{df}

\begin{df}
    Lex $X$ be a topological space and let $(x_n)$ be a sequence in $X$. We say that $(x_n)$ converges to $x\in X$ if for all neighborhood $\mathcal U$ of $x$, $\exists N\in \N$ such that $x_n \in \mathcal U$ for all $n\geq N$.
\end{df}

\begin{ex}
    Limits in general are not unique in topological spaces. Let $X$ be a set with at least $2$ points endowed with the trivial topology. Then every sequence in $X$ converges to every point in $X$.
\end{ex}

\begin{df}
    Let $X, Y$ be topological spaces. We say a function $f: X\to Y$ continuous if for any open set $V\subseteq Y$, the preimage $f^{-1}(Y)$ is open in $X$.
\end{df}

\begin{prop}
    A function $f: X\to Y$ is continuous iff $\forall x\in M$ and any neighborhood $\mathcal V$ of $f(x)$, $\exists$ a neighborhood $\mathcal U$ of $x$ such that $f(\mathcal U) \subseteq \mathcal V$.
    \begin{proof}
        "$\implies$": Let $\mathcal V\subseteq Y$ is open. We need to show $f^{-1}(Y)$ is open. Let $x\in f^{-1}(\mathcal V)$, then $f(x) \in \mathcal V$. By definition, $\exists$ a neighborhood $\mathcal U_x$ such that $f(\mathcal U_x) \subseteq \mathcal V \leadsto \mathcal U_x \subseteq f^{-1}(\mathcal V)$. Take the union of all such $\mathcal U_x$ over $x\in f^{-1}(\mathcal V)$, then
        \begin{gather*}
            \bigcup_{x\in f^{-1}(\mathcal V)} \mathcal U_x \subseteq f^{-1}(\mathcal V) \quad\text{and}\quad \forall x \in f^{-1}(\mathcal V),\, x\in \mathcal U_x \subseteq f^{-1}(\mathcal V) \\
            \implies f^{-1}(\mathcal V) = \bigcup_{x\in f^{-1}(\mathcal V)} \mathcal U_x
        \end{gather*}
        and thus $f^{-1}(\mathcal V)$ is open.

        "$\impliedby$": Let $x\in X$ and let $\mathcal V$ be a neighborhood of $f(x)$. By definition $x\in f^{-1}(\mathcal V)$, which is an open set by assumption. Also, $f(f^{-1}(\mathcal V)) \subseteq \mathcal V$, hence $f^{-1}(\mathcal V)$ is a neighborhood of $x$ such that $f(f^{-1}(\mathcal V)) \subseteq \mathcal V$.
    \end{proof}
\end{prop}

\begin{df}
    A homeomorphism is a continuous bijection between topoloical spaces.
\end{df}

\begin{cl}
    A homeomorphism $f: X \to Y$ bijects the corresponding topologies $\mathcal T_X$ and $\mathcal T_Y$.
\end{cl}

\section{Hausdorff Space}

\begin{df}
    A topological space $X$ is said to be Hausdorff if given any pair of distinct paints $x_1, x_2 \in X$, $\exists$ neighborhoods $\mathcal U_1$ of $x_1$ and $\mathcal U_2$ of $x_2$ such that $\mathcal U_1 \cap \mathcal U_2 = \emptyset$.
\end{df}

A metric space is always a Hausdorff space.

\begin{lm}
    Let $X$ be Hausdorff.
    \begin{enumerate}[label={\alph*)}]
        \item Every one-point set is closed.
        \item If a sequence $(x_n)$ in $X$ converges, then the limit is unique.
    \end{enumerate}
    \begin{proof}
        \begin{enumerate}[label={\alph*)}]
            \item Pick $x\in X$. For any $y$ distinct from $x$, there exists disjoint neighborhoods $\mathcal U_x$ of $x$ and $\mathcal V_y$ of $y$. We have
            \[
            \set{x}^c = \bigcup_{y\in X\setminus \set{x}} \mathcal V_y
            \]
            which is an open set.

            \item 
            Suppose that $x, x'$ are distinct limits of $(x_n)$. $\exists$ disjoint neighborhoods $\mathcal U$ of $x$ and $\mathcal U'$ of $x'$. $\exists N, N'\in \N$ such that "$n\geq N'$ implies $x_n\in \mathcal U$" and "$n\geq N'$ implies $x_n \in \mathcal U'$". If $n\geq \max(N, N')$, then $x_n \in \mathcal U \cap \mathcal U' = \emptyset$, contradiction. Therefore, any converging sequence has a unique limit. 
        \end{enumerate}
    \end{proof}
\end{lm}

\section{Subspaces and Product Spaces}

\begin{df}
    Let $X$ be a topological space, let $A\subseteq X$. We define the subspace topology $\mathcal T_A$ of $A$ by
    \[
    \mathcal T_A = \set{\mathcal U\subseteq A\mid \mathcal U = A\cap \mathcal V \text{ for some open }\mathcal V\subseteq X}.
    \]
\end{df}

\begin{rmk}
    Openness and closedness are not just properties of a set itself, but rather a set in a relation to a particular topological space.
\end{rmk}

\begin{prop}
    Let $M$ be a metric space, and let $N\subseteq M$ be a nonempty subset. The subspace topology on $N$ is the same as the metric topology obtained by restricting the metric of $M$ to $N$.
    \begin{proof}
        Suppose that $\mathcal V$ is an open set in $M$ and let $\mathcal U = N\cap \mathcal V \in \mathcal T_N$. 
        
        We first to prove that $\mathcal U$ belongs to the metric toplogy of $N$. Let $x\in \mathcal U$. Since $x\in N\cap \mathcal V \subseteq \mathcal V$, there exists $r > 0$ such that $B_M(x, r)\subseteq \mathcal V$, and
        \[
        B_N(x, r) = N\cap B_M(x, r) \subseteq N\cap \mathcal V = \mathcal U,
        \]
        hence $\mathcal U$ is open in $N$ (in the metric topology).

        Conversely, let $\mathcal U$ be an open set in the metric topology of $N$. $\forall x\in \mathcal U$, $\exists r_x > 0$ such that $B_N(x, r_x) \subseteq \mathcal U$. Note that
        \[
        \mathcal U = \bigcup_{x\in\mathcal U} B_N(x, r_x) = \bigcup_{x\in\mathcal U} N \cap B_M(x, r_x) = N\cap \bigcup_{x\in\mathcal U} B_M(x, r_x),
        \]
        hence $\mathcal U$ belongs to the subspace topology of $N$.
    \end{proof}
\end{prop}

\begin{df}
    Let $X$ be a set. A basis in $X$ is a collection $\mathcal B$ of subsets of $X$ satsifying
    \begin{enumerate}[label={\alph*)}]
        \item Every element of $X$ is in some element in $\mathcal B$. That is,
        \[
        X = \bigcup_{B\in \mathcal B} B.
        \]
        \item If $B_1, B_2 \in \mathcal B$ and $x\in B_1 \cap B_2$, there exists $B_3 \in \mathcal B$ such that $x\in B_3 \subseteq B_1\cap B_2$.
    \end{enumerate}
\end{df}

\begin{df}
    Given $X$ and a collection $\mathcal B$ of subsets of $X$, we say that $\mathcal U\subseteq X$ satisfies the basis criterion with respect to $\mathcal B$ if $\forall x \in \mathcal U$, $\exists B \in \mathcal B$ such that $x\in B\subseteq \mathcal U$
\end{df}

\begin{lm}
    Suppose that $\mathcal B$ is a basis in $X$, and let $\mathcal T$ be the collection of all unions of elements of $\mathcal B$. Then $\mathcal T$ is precisely the collection of all subsets of $X$ that satisfy the basis criterion w.r.t. $\mathcal B$.
    \begin{proof}
        Let $\mathcal U\subseteq X$. Suppose that $\mathcal U$ satisfies the basis criterion. Let
        \[
        \mathcal V = \bigcup\set{B\in\mathcal B\mid B\subseteq\mathcal U},
        \]
        then $\mathcal V \in \mathcal T$. We want to show that $\mathcal U = \mathcal V$. Clearly, $\mathcal V\subseteq \mathcal U$. Let $x\in \mathcal U$. Since $\mathcal U$ satisfies the basis criterion, $\exists B\in\mathcal B$ such that $x\in B\subseteq \mathcal U$, so $x\in \mathcal V$, therefore $\mathcal U\subseteq \mathcal V$.

        Conversely, suppose that $\mathcal U\in \mathcal T$, then $\mathcal U$ is a union of elements of $\mathcal B$, say $\mathcal U = \bigcup_{B\in\mathcal A}B$ where $\mathcal A\subseteq \mathcal B$. For any $x\in\mathcal U$, $x\in B$ for some $B\in \mathcal A$, also $B\subseteq \mathcal U$, so $\mathcal U$ satisfies the basis criterion.
    \end{proof}
\end{lm}

\begin{prop}
    Let $\mathcal B$ be a basis in $X$, and let $\mathcal T$ be collection of all unions of elements of $\mathcal B$. Then $\mathcal T$ is a topology on $X$. This is called the topology generated by $\mathcal B$.
    \begin{proof}
        First of all, $\emptyset = \bigcup_{B\in\emptyset} B \in \mathcal T$ and $X = \bigcup_{B\in\mathcal B} B \in \mathcal T$.

        Let $(\mathcal U_\alpha)$ be a collection of elements in $\mathcal T$, then the union $\mathcal U = \bigcup_\alpha \mathcal U_\alpha$ is also a union of elements in $\mathcal B$, hence $\mathcal U\in \mathcal T$.

        Let $\mathcal U_1, \mathcal U_2 \in \mathcal T$. For any $x\in \mathcal U_1 \cap \mathcal U_2$, since $\mathcal U_1, \mathcal U_2$ satisfy the basis criterion, $\exists B_1, B_2 \in \mathcal B$ such that $x\in B_1\subseteq \mathcal U_1$ and $x\in B_2\subseteq \mathcal U_2$. By the definition of basis, $\exists B_3\in \mathcal B$ such that $x\in B_3 \subseteq B_1\cap B_2 \subseteq \mathcal U_1 \cap \mathcal U_2$. Therefore, $\mathcal U_1 \cap \mathcal U_2$ satisfies the basis criterion w.r.t. $\mathcal B$, hence $\mathcal U_1 \cap \mathcal U_2 \in \mathcal T$.
    \end{proof}
\end{prop}

Now, we can define product topology.

\begin{df}
    Let $X_1, \ldots, X_n$ be topological spaces. Define a basis in $X_1 \times \cdots \times X_n$ by
    \[
    \mathcal B = \set{\mathcal U_1 \times \cdots \times \mathcal U_n \mid \mathcal U_i \text{ is open in }X_i,\, 1\leq i\leq n}.
    \]
    The product topology on $X_1 \times \cdots \times X_n$ is the topology generated by $\mathcal B$.
\end{df}

\begin{prop}
    If $X_1, \ldots, X_n, Y_1, \ldots, Y_n$ are topological spaces, and if $f_i: X_i \to Y_i$ are continuous functions for $1\leq i\leq n$, then the function
    \[
    f: X_1 \times \cdots \times X_n \to Y_1 \times \cdots \times Y_n, \quad f(x_1, \ldots, x_n) = (f_1(x_1), \ldots, f_n(x_n))
    \]
    is continuous.
    \begin{proof}
        We first prove that if the preimages of basis elements are open, then $f$ is continuous. Let $\mathcal U$ be an open set in $Y_1 \times \cdots \times Y_n$. By definition, $\mathcal U$ is a union of basis elements, say $\mathcal U = \bigcup_\alpha \mathcal V_\alpha$, where each $\mathcal V_\alpha$ is a basis element. We have
        \[
        f^{-1}(\mathcal U) = f^{-1}\left(\bigcup_\alpha \mathcal V_\alpha\right) = \bigcup_\alpha f^{-1}(\mathcal V_\alpha),
        \]
        which is open if each $f^{-1}(\mathcal V_\alpha)$ is open.

        Let $\mathcal V = \mathcal V_1 \times \cdots \times \mathcal V_n$ be a basis element in $Y_1 \times \cdots \times Y_n$, where $\mathcal V_i$ is open in $Y_i$. Then
        \[
        f^{-1}(\mathcal V) = f^{-1}(\mathcal V_1 \times \cdots \times \mathcal V_n) = f_1^{-1}(\mathcal V_1) \times \cdots \times f_n^{-1}(\mathcal V_n),
        \]
        which is a basis element in $X_1 \times \cdots \times X_n$ since each $f_i$ is continuous. Therefore, $f$ is continuous.
    \end{proof}
\end{prop}

\begin{df}
    Let $(M, d_M), (N, d_N)$ be metric spaces. Define the $p$-metric on $M\times N$ by
    \[
    d_p((x_1, y_1), (x_2, y_2)) = \left(d_M(x_1, x_2)^p + d_N(y_1, y_2)^p\right)^{\frac1p}, \quad 1\leq p < \infty,
    \]
    and the $\infty$-metric by
    \[
    d_\infty((x_1, y_1), (x_2, y_2)) = \max\set{d_M(x_1, x_2), d_N(y_1, y_2)}.
    \]
\end{df}

\begin{prop}
    The following properties hold for metric spaces $M, N$:
    \begin{itemize}
        \item $d_\infty \leq d_p \leq 2^{\frac1p}d_\infty$
        \item The metric topologies induced by $d_p$ and $d_\infty$ are the same.
        \item The metric topology coincides with the product topology.
    \end{itemize}
\end{prop}

\begin{prop}
    Let $M$ be a metric space, then the metric $d : M\times M \to \R$ is continuous.
    \begin{proof}
        We use the metric $d_1$ on $M\times M$.

        Let $(x_1, y_1), (x_2, y_2) \in M\times M$. We have
        \begin{align*}
            |d(x_1, y_1) - d(x_2, y_2)| &\leq |d(x_1, y_1) - d(x_1, y_2)| + |d(x_1, y_2) - d(x_2, y_2)| \\
            &\leq d(y_1, y_2) + d(x_1, x_2).
        \end{align*}
        Given $\epsilon > 0$, take $\delta = \frac\epsilon2$. If $d_1(x_1, y_1), d_1(x_2, y_2) < \delta$, then
        \[
        |d(x_1, y_1) - d(x_2, y_2)| < 2\delta = \epsilon,
        \]
        hence $d$ is continuous.
    \end{proof}
\end{prop}

So far, we've defined product topology for finite products. We can also define product topology for infinite products.

\begin{df}
    Let $(X_i, \mathcal T_i)$ be topological spaces for $i\in I$, where $I$ is an index set. We define the box topology on $\prod_{i\in I} X_i$ to be the topology generated by the basis
    \[
    \mathcal B = \set{\prod_{i\in I} \mathcal U_i \mid \mathcal U_i \text{ is open in }X_i,\, i\in I}.
    \]
    The product topology on $\prod_{i\in I} X_i$ is the topology generated by the basis
    \[
    \mathcal B' = \set{\prod_{i\in I} \mathcal U_i \mid \mathcal U_i \text{ is open in }X_i,\, \mathcal U_i = X_i \text{ for all but finitely many }i}.
    \]
\end{df}

\begin{rmk}
    For finite products, the box topology and the product topology coincide. However, for infinite products, the box topology is strictly finer than the product topology, i.e. every open set in the product topology is also open in the box topology, but not vice versa.
\end{rmk}

We will prefer the product topology over the box topology, because a number of important theorems about finite products still hold for infinite products under the product topology.

\begin{ex}
    Let $\R^\omega = \prod_{n\in\N} \R$. Consider the function
    \[
    f: \R \to \R^\omega, \quad f(x) = (x, x, x, \ldots).
    \]
    $f$ is continuous under the product topology, but not continuous under the box topology. To see this, let $\mathcal U = \prod_{n\in\N} (-\frac1n, \frac1n)$, which is open in the box topology. We have
    \[
    f^{-1}(\mathcal U) = \bigcap_{n\in\N} \left(-\frac1n, \frac1n\right) = \set{0},
    \]
    which is not open in $\R$.
\end{ex}

\section{Completion}

\begin{df}
    A sequence $(x_n)$ in a metric space $M$ is called a Cauchy sequence if $\forall \epsilon > 0$, $\exists N\in \N$ such that $m, n \geq N$ implies $d(x_n, x_m) < \epsilon$.
\end{df}

Every convergent sequence is a Cauchy sequence. The converse is not true in general, e.g. in $\Q$.

\begin{df}
    A metric space $M$ is said to be complete if every Cauchy sequence in $M$ converges to a point in $M$.
\end{df}

Completeness is not a topological property, i.e. two homeomorphic metric spaces may not be both complete or both incomplete.

\begin{ex}
    Define two metric on $\N$ by
    \[
    d_1(m, n) = |m - n|, \quad d_2(m, n) = \abs{\frac1m - \frac1n}.
    \]
    We can verify that $(\N, d_1)$ and $(\N, d_2)$ are homeomorphic, and $(\N, d_1)$ is complete. 
    However, $(\N, d_2)$ is not complete since the sequence $(n)$ is Cauchy but does not converge in $\N$.
\end{ex}

\begin{prop}
    Every closed subset of a complete metric space is a complete metric subspace.
\end{prop}

\begin{cl}
    Every closed subset of the Euclidean space $\R^n$ is a complete metric subspace.
\end{cl}

\begin{thm}
    Every metric space can be completed. That is, a metric space $M$ is always a metric subspace of a complete metric space $\Hat M$.
    \begin{proof}
        Let $\mathcal C$ be the collection of all Cauchy sequences in $M$. Define a relation $\sim$ on $\mathcal C$ by
        \[
        (x_n) \sim (y_n) \iff \lim_{n\to\infty} d(x_n, y_n) = 0.
        \]
        We can verify that $\sim$ is an equivalence relation. Let $\Hat M = \mathcal C/\sim$, and denote the equivalence class of $(x_n)$ by $[(x_n)]$. Define a metric $D$ on $\Hat M$ by
        \[
        D(X, Y) = \lim_{n\to\infty} d(x_n, y_n), 
        \]
        where $X = [(x_n)], Y = [(y_n)]$. 
        
        We first verify that $D$ is well-defined and is a metric on $\Hat M$. By triangle inequality, 
        \begin{align*}
        |d(x_n, y_n) - d(x_m, y_m)| &\leq |d(x_n, y_n) - d(x_m, y_n)| + |d(x_m, y_n) - d(x_m, y_m)| \\
        &\leq d(x_n, x_m) + d(y_n, y_m),
        \end{align*}
        and since $(x_n), (y_n)$ are Cauchy sequences, $\forall \epsilon > 0$, $\exists N\in \N$ such that $m, n \geq N$ implies $|d(x_n, y_n) - d(x_m, y_m)| < \epsilon$, hence $(d(x_n, y_n))$ is a Cauchy sequence in $\R$, which converges to a limit in $\R$. Now consider another representative $(x_n'), (y_n')$ of $X, Y$ respectively, and let
        \[
        L = \lim_{n\to\infty} d(x_n, y_n), \quad L' = \lim_{n\to\infty} d(x_n', y_n').
        \]
        By triangle inequality again, we have
        \begin{align*}
            |d(x_n, y_n) - d(x_n', y_n')| &\leq |d(x_n, y_n) - d(x_n', y_n)| + |d(x_n', y_n) - d(x_n', y_n')| \\
            &\leq d(x_n, x_n') + d(y_n, y_n').
        \end{align*}
        Since $(x_n) \sim (x_n')$ and $(y_n) \sim (y_n')$, $\forall \epsilon > 0$, $\exists N\in \N$ such that $n\geq N$ implies $|d(x_n, y_n) - d(x_n', y_n')| < \epsilon$, hence $L = L'$. Therefore, $D$ is well-defined.

        It is clear that $D(X, Y) \geq 0$ and $D(X, Y) = D(Y, X)$. If $D(X, Y) = 0$, then $d(x_n, y_n) \to 0$, so $(x_n) \sim (y_n)$, i.e. $X = Y$. Conversely, if $X = Y$, then $(x_n) \sim (y_n)$, hence $D(X, Y) = 0$. Finally, for any $X = [(x_n)], Y = [(y_n)], Z = [(z_n)] \in \Hat M$, by triangle inequality,
        \[
        D(X, Z) = \lim_{n\to\infty} d(x_n, z_n) \leq \lim_{n\to\infty} d(x_n, y_n) + \lim_{n\to\infty} d(y_n, z_n) = D(X, Y) + D(Y, Z).
        \]
        Therefore, $D$ is a metric on $\Hat M$.

        For each $x\in M$, define
        \[
        \Bar x = (x, x, x, \ldots) \in \mathcal C,
        \]
        then $\Bar x$ is a Cauchy sequence, and $D(\Bar x, \Bar y) = d(x, y)$ for any $x, y\in M$. It is clear that the mapping $x\mapsto \Bar x$ is an isometric embedding of $M$ into $\Hat M$, so we may identify $M$ as a metric subspace of $\Hat M$.

        Finally, we need to show that $\Hat M$ is complete. Let $(X_n)$ be a Cauchy sequence in $\Hat M$, where $X_n = [(x_{n, k})]$. Given $\epsilon > 0$, $\exists N\in \N$ such that $m, n \geq N$ implies $D(X_n, X_m) < \epsilon$. By the definition of $D$, $\exists K\in \N$ such that $k \geq K$ implies $d(x_{n, k}, x_{m, k}) < \epsilon$. We can pick a subsequence $(X_{n_j})$ of $(X_n)$ such that $D(X_{n_j}, X_{n_{j+1}}) < 2^{-j}$ for all $j\in \N$. For each $j$, we can pick a term $x_{n_j, k_j}$ such that $k_j \geq K$ and $d(x_{n_j, k_j}, x_{n_{j+1}, k_{j+1}}) < 2^{-j}$. Consider the sequence $(y_j)$ defined by
        \[
        y_j = x_{n_j, k_j}.
        \] We claim that $(y_j)$ is a Cauchy sequence in $M$. Given $\epsilon > 0$, pick $N\in \N$ such that $2^{-N} < \epsilon$. If $m, n \geq N$ and $m < n$, then
        \[
        d(y_n, y_m) \leq \sum_{j=m}^{n-1} d(y_{j+1}, y_j) < \sum_{j=m}^{n-1} 2^{-j} < \sum_{j=N}^\infty 2^{-j} = 2^{1-N} < 2\epsilon,
        \]
        hence $(y_j)$ is a Cauchy sequence in $M$. Let $Y = [(y_j)] \in \Hat M$, we claim that $X_n \to Y$ in $\Hat M$. Given $\epsilon > 0$, pick $N\in \N$ such that $2^{-N} < \epsilon$. If $n \geq N$, then
        \[
        D(X_n, Y) = \lim_{k\to\infty} d(x_{n, k}, y_k) \leq \lim_{k\to\infty} d(x_{n, k}, x_{n_k, k}) + \lim_{k\to\infty} d(x_{n_k, k}, y_k) < \epsilon + 0 = \epsilon,
        \]
        hence $X_n \to Y$. Therefore, $\Hat M$ is complete.
    \end{proof}
\end{thm}